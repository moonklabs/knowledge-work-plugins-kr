---
name: statistical-analysis
description: 기술 통계, 추세 분석, 이상치 탐지, 가설 검정을 포함한 통계적 방법을 적용합니다. 분포를 분석하거나, 유의성을 검정하거나, 이상 현상을 탐지하거나, 상관관계를 계산하거나, 통계 결과를 해석할 때 사용합니다.
---

# 통계 분석 스킬

기술 통계, 추세 분석, 이상치 탐지, 가설 검정, 통계적 주장에 대한 주의사항 안내입니다.

## 기술 통계 방법론

### 중심 경향

데이터에 따라 적절한 중심 측정값을 선택합니다:

| 상황 | 사용 | 이유 |
|---|---|---|
| 대칭 분포, 이상치 없음 | 평균 | 가장 효율적인 추정량 |
| 편향된 분포 | 중앙값 | 이상치에 강건 |
| 범주형 또는 순서형 데이터 | 최빈값 | 비숫자형에 유일한 옵션 |
| 이상치가 있는 매우 편향된 분포 (예: 사용자당 매출) | 중앙값 + 평균 | 둘 다 보고; 차이가 편향을 보여줌 |

**비즈니스 지표에는 항상 평균과 중앙값을 함께 보고합니다.** 유의미하게 차이가 나면 데이터가 편향되어 있으며 평균만으로는 오해를 줄 수 있습니다.

### 산포도 및 변동성

- **표준편차**: 값이 평균에서 일반적으로 얼마나 벗어나는지. 정규 분포 데이터에 사용.
- **사분위 범위 (IQR)**: p25에서 p75까지의 거리. 이상치에 강건. 편향된 데이터에 사용.
- **변동계수 (CV)**: 표준편차 / 평균. 다른 척도의 지표 간 변동성을 비교할 때 사용.
- **범위**: 최댓값 - 최솟값. 이상치에 민감하지만 데이터 범위를 빠르게 파악 가능.

### 비즈니스 맥락을 위한 백분위수

평균만으로는 부족하므로 핵심 백분위수를 보고합니다:

```
p1:   하위 1% (바닥 / 일반적 최솟값)
p5:   정상 범위 하한
p25:  제1사분위수
p50:  중앙값 (일반적 사용자)
p75:  제3사분위수
p90:  상위 10% / 파워 유저
p95:  정상 범위 상한
p99:  상위 1% / 극단 사용자
```

**예시 내러티브**: "세션 기간의 중앙값은 4.2분이지만, 상위 10% 사용자는 세션당 22분 이상을 사용하여 평균을 7.8분으로 끌어올립니다."

### 분포 설명

분석하는 모든 숫자 분포를 특성화합니다:

- **형태**: 정규, 우측 편향, 좌측 편향, 이봉, 균등, 꼬리가 두꺼운 분포
- **중심**: 평균과 중앙값 (그리고 둘 사이의 차이)
- **산포**: 표준편차 또는 IQR
- **이상치**: 얼마나 많고 얼마나 극단적인지
- **경계**: 자연적인 하한(0) 또는 상한(100%)이 있는지

## 추세 분석 및 예측

### 추세 식별

**이동 평균**으로 노이즈를 평활화합니다:
```python
# 7일 이동 평균 (주간 계절성이 있는 일일 데이터에 적합)
df['ma_7d'] = df['metric'].rolling(window=7, min_periods=1).mean()

# 28일 이동 평균 (주간 및 월간 패턴을 모두 평활화)
df['ma_28d'] = df['metric'].rolling(window=28, min_periods=1).mean()
```

**기간 대비 비교**:
- 주간 대비(WoW): 지난주 같은 요일과 비교
- 월간 대비(MoM): 직전 같은 달과 비교
- 연간 대비(YoY): 계절적 비즈니스의 표준
- 전년 동일일: 특정 역일 비교

**성장률**:
```
Simple growth: (current - previous) / previous
CAGR: (ending / beginning) ^ (1 / years) - 1
Log growth: ln(current / previous)  -- better for volatile series
```

### 계절성 탐지

주기적 패턴을 확인합니다:
1. 원시 시계열을 플롯합니다 -- 시각적 검토 우선
2. 요일별 평균을 계산합니다: 명확한 주간 패턴이 있는가?
3. 월별 평균을 계산합니다: 연간 주기가 있는가?
4. 기간을 비교할 때 추세와 계절성을 혼동하지 않도록 항상 전년 대비 또는 동일 기간 비교를 사용합니다

### 예측 (단순 방법)

비즈니스 분석가(데이터 과학자가 아닌)를 위해 직관적인 방법을 사용합니다:

- **단순 예측**: 내일 = 오늘. 기준선으로 사용.
- **계절적 단순 예측**: 내일 = 지난주/작년 같은 날.
- **선형 추세**: 과거 데이터에 직선을 맞춤. 명확하게 선형인 추세에만.
- **이동 평균 예측**: 후행 평균을 예측값으로 사용.

**항상 불확실성을 전달합니다**. 점 추정이 아닌 범위를 제공합니다:
- "3개월 추세를 기반으로 다음 달 가입자는 10K-12K으로 예상됩니다"
- "다음 달 가입자는 정확히 11,234명입니다"라고 하지 않습니다

**데이터 과학자에게 에스컬레이션해야 할 때**: 비선형 추세, 다중 계절성, 외부 요인(마케팅 지출, 휴일), 또는 예측 정확도가 자원 배분에 중요할 때.

## 이상치 및 이상 현상 탐지

### 통계적 방법

**Z-점수 방법** (정규 분포 데이터용):
```python
z_scores = (df['value'] - df['value'].mean()) / df['value'].std()
outliers = df[abs(z_scores) > 3]  # 3 표준편차 이상 벗어난 값
```

**IQR 방법** (비정규 분포에 강건):
```python
Q1 = df['value'].quantile(0.25)
Q3 = df['value'].quantile(0.75)
IQR = Q3 - Q1
lower_bound = Q1 - 1.5 * IQR
upper_bound = Q3 + 1.5 * IQR
outliers = df[(df['value'] < lower_bound) | (df['value'] > upper_bound)]  # IQR 범위를 벗어난 이상치
```

**백분위수 방법** (가장 단순):
```python
outliers = df[(df['value'] < df['value'].quantile(0.01)) |
              (df['value'] > df['value'].quantile(0.99))]  # 상하위 1% 이상치
```

### 이상치 처리

이상치를 자동으로 제거하지 마십시오. 대신:

1. **조사**: 데이터 오류인가, 진짜 극단값인가, 아니면 다른 모집단인가?
2. **데이터 오류**: 수정하거나 제거합니다 (예: 음수 나이, 1970년 타임스탬프)
3. **진짜 극단값**: 유지하되 강건한 통계(평균 대신 중앙값) 사용을 고려합니다
4. **다른 모집단**: 별도 분석을 위해 분리합니다 (예: 엔터프라이즈 vs SMB 고객)

**한 일을 보고합니다**: "거래 금액 >$50K인 47개 레코드(0.3%)를 제외했습니다. 이는 별도 분석되는 대량 엔터프라이즈 주문입니다."

### 시계열 이상 현상 탐지

시계열에서 이상 값을 탐지하려면:

1. 기대값을 계산합니다 (이동 평균 또는 전년 동기)
2. 기대값으로부터의 편차를 계산합니다
3. 임계값을 초과하는 편차를 플래그합니다 (일반적으로 잔차의 2-3 표준편차)
4. 포인트 이상(단일 이상 값)과 변환점(지속적 변화)을 구분합니다

## 가설 검정 기초

### 사용 시점

관찰된 차이가 실제인지 우연에 의한 것인지 판단해야 할 때 가설 검정을 사용합니다. 일반적인 시나리오:

- A/B 테스트 결과: 변형 B가 실제로 A보다 나은가?
- 전후 비교: 제품 변경이 실제로 지표를 움직였는가?
- 세그먼트 비교: 엔터프라이즈 고객이 정말 더 높은 리텐션을 보이는가?

### 프레임워크

1. **귀무가설 (H0)**: 차이가 없다 (기본 가정)
2. **대립가설 (H1)**: 차이가 있다
3. **유의 수준(alpha) 선택**: 일반적으로 0.05 (위양성 확률 5%)
4. **검정 통계량과 p-값 계산**
5. **해석**: p < alpha이면 H0를 기각합니다 (실제 차이의 근거)

### 일반적인 검정

| 시나리오 | 검정 | 사용 시점 |
|---|---|---|
| 두 그룹 평균 비교 | t-검정 (독립) | 정규 데이터, 두 그룹 |
| 두 그룹 비율 비교 | 비율에 대한 z-검정 | 전환율, 이진 결과 |
| 쌍체 측정값 비교 | 대응 t-검정 | 동일 엔티티의 전후 |
| 3개 이상 그룹 평균 비교 | 분산분석(ANOVA) | 다중 세그먼트 또는 변형 |
| 비정규 데이터, 두 그룹 | 맨-위트니 U 검정 | 편향된 지표, 순서형 데이터 |
| 범주 간 연관성 | 카이제곱 검정 | 두 범주형 변수 |

### 실질적 유의성 vs 통계적 유의성

**통계적 유의성**은 차이가 우연에 의한 것일 가능성이 낮다는 것을 의미합니다.

**실질적 유의성**은 차이가 비즈니스 결정에 중요할 만큼 크다는 것을 의미합니다.

차이가 통계적으로 유의미하지만 실질적으로는 의미 없을 수 있습니다 (큰 표본에서 흔함). 항상 다음을 보고합니다:
- **효과 크기**: 차이가 얼마나 큰가? (예: "변형 B가 전환율을 0.3 퍼센트 포인트 개선")
- **신뢰 구간**: 실제 효과의 합리적 범위는?
- **비즈니스 임팩트**: 이것이 매출, 사용자 또는 다른 비즈니스 용어로 무엇을 의미하는가?

### 표본 크기 고려사항

- 작은 표본은 유의미한 p-값이 나와도 신뢰할 수 없는 결과를 생성합니다
- 비율에 대한 경험 법칙: 기본적인 신뢰성을 위해 그룹당 최소 30개 이벤트 필요
- 작은 효과(예: 1% 전환율 변화)를 탐지하려면 그룹당 수천 개의 관측값이 필요할 수 있습니다
- 표본이 작다면 명시합니다: "그룹당 200개 관측값만으로는 X% 미만의 효과를 탐지할 통계적 검정력이 제한적입니다"

## 통계적 주장에 주의해야 할 때

### 상관관계는 인과관계가 아닙니다

상관관계를 발견했을 때 명시적으로 고려합니다:
- **역인과**: B가 A를 유발할 수 있고, A가 B를 유발하는 것이 아닐 수 있음
- **교란 변수**: C가 A와 B 모두를 유발할 수 있음
- **우연의 일치**: 변수가 충분히 많으면 허위 상관관계가 불가피

**할 수 있는 말**: "기능 X를 사용하는 사용자의 리텐션이 30% 더 높습니다"
**더 많은 근거 없이 할 수 없는 말**: "기능 X가 30% 더 높은 리텐션을 유발합니다"

### 다중 비교 문제

많은 가설을 검정하면 일부는 우연히 "유의미"하게 됩니다:
- p=0.05에서 20개 지표를 검정하면 약 1개가 위양성
- 차이가 나는 세그먼트를 찾기 전에 많은 세그먼트를 살펴봤다면, 그 사실을 기록합니다
- 본페로니 보정(alpha를 검정 수로 나눔)으로 다중 비교를 조정하거나, 실행한 검정 수를 보고합니다

### 심슨의 역설(Simpson's Paradox)

집계된 데이터의 추세가 세분화하면 역전될 수 있습니다:
- 결론이 주요 세그먼트에서도 유지되는지 항상 확인합니다
- 예시: 전체 전환율은 올라갔지만 모든 세그먼트에서 전환율이 하락 -- 더 높은 전환율 세그먼트 쪽으로 믹스가 이동했기 때문

### 생존자 편향(Survivorship Bias)

데이터셋에 "생존"한 엔티티만 분석할 수 있습니다:
- 활성 사용자 분석은 이탈한 사용자를 무시
- 성공한 기업 분석은 실패한 기업을 무시
- 항상 질문합니다: "이 데이터셋에서 누가 빠져 있으며, 포함되었다면 결론이 바뀌는가?"

### 생태학적 오류(Ecological Fallacy)

집단 수준 추세가 개인에게 적용되지 않을 수 있습니다:
- "X가 높은 국가는 Y가 높다"가 "X가 높은 개인은 Y가 높다"를 의미하지 않습니다
- 그룹 수준 발견을 개별 사례에 적용할 때 주의합니다

### 특정 수치에의 고착

거짓 정밀도에 주의합니다:
- "다음 분기 이탈률은 4.73%입니다"는 실제보다 더 큰 확실성을 암시합니다
- 범위를 선호합니다: "과거 패턴을 기반으로 이탈률은 4-6%로 예상됩니다"
- 적절히 반올림합니다: "약 5%"가 "4.73%"보다 더 정직한 경우가 많습니다
